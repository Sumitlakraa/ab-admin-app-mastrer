
<!-- <app-serach-buses></app-serach-buses> -->
<div style=" margin-top: 20px;" fxLayout="column">
    <mat-card class="mat-elevation-z0 tab-container" fxLayout="row" fxFlexFill>
        <div fxFlex="60" fxLayoutAlign="start center">
            <!-- <mat-button-toggle-group appearance="legacy" name="fontStyle" aria-label="Font Style">
              <mat-button-toggle value="Tickets" checked="true" (change)="onToggleButtonChange($event.value)">Tickets</mat-button-toggle>
              <mat-button-toggle value="Requests" (change)="onToggleButtonChange($event.value)">Requests</mat-button-toggle>
            </mat-button-toggle-group> -->

            <mat-chip-list aria-label="selection" style="margin-left: 20px; margin-top: 0.25em;" fxFlex="52">
                <mat-chip *ngFor="let filter of filters | keyvalue" (removed)="removeFilter(filter.key)">
                    {{ filtersDisplayValue.get(filter.key) }}
                    <button matChipRemove><mat-icon>cancel</mat-icon></button>
                </mat-chip>
            </mat-chip-list>
        </div>

        <div fxFlex="40" fxLayoutAlign="end center">
            <!-- <button mat-raised-button class="action-button" (click)="onBookTicketClick()"
                style="padding-left: 50px; padding-right: 50px;">Book Ticket</button> -->
        </div>

    </mat-card>

        <!-- <div style="height: 80px; padding-right: 20px;" fxLayoutAlign="end center">
            
        
            
        </div> -->

        <!-- <div fxFlex="70" fxLayoutAlign="end center">
            <mat-form-field appearance="fill">
                <mat-label>Enter a date range</mat-label>
                <mat-date-range-input [rangePicker]="picker">
                <input matStartDate placeholder="Start date">
                <input matEndDate placeholder="End date">
                </mat-date-range-input>
                <mat-hint>MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-date-range-picker #picker></mat-date-range-picker>
            </mat-form-field>
        </div> -->
    
    </div>


    <div>
    <div style="width:fill; overflow-x:scroll;" style="height: 10px;">
      <table mat-table [dataSource]="tickets" class="mat-elevation-z8" >
  
          <ng-container matColumnDef="ticket_pnr">
              <th mat-header-cell *matHeaderCellDef>
                <button class="filterButton" #pnrButton mat-stroked-button color="primary" (click)="openPnrFilterDialog(pnrButton)">Ticket PNR</button>
              </th>
              <td mat-cell *matCellDef="let ticket"> {{ticket.ticketPNR}} </td>
          </ng-container>
      
          <ng-container matColumnDef="bus_number">
              <th mat-header-cell *matHeaderCellDef>
                <button class="filterButton" #busButton mat-stroked-button color="primary" (click)="openBusFilterDialog(busButton)">Bus</button>
              </th>
              <td mat-cell *matCellDef="let ticket"> {{ticket.busNumber}} </td>
          </ng-container>
      
          <ng-container matColumnDef="mobile">
              <th mat-header-cell *matHeaderCellDef> 
                <button class="filterButton" #passengerMobilebutton mat-stroked-button color="primary" (click)="openPassengerMobileFilterDialog(passengerMobilebutton)">Passenger Mobile</button>
             </th>
              <td mat-cell *matCellDef="let ticket"> {{ticket.passengerMobile}} </td>
          </ng-container>
      
          <ng-container matColumnDef="from_town">
              <th mat-header-cell *matHeaderCellDef> 
                <button class="filterButton" #fromTownButton mat-stroked-button color="primary" (click)="openFromFilterDialog(fromTownButton)">From Town</button>   
              </th>
              <td mat-cell *matCellDef="let ticket"> {{ticket.fromTown}} </td>
          </ng-container>
  
          <ng-container matColumnDef="to_town">
              <th mat-header-cell *matHeaderCellDef> 
                <button class="filterButton" #tillTownButton mat-stroked-button color="primary" (click)="openTillFilterDialog(tillTownButton)">To Town</button> 
              </th>
              <td mat-cell *matCellDef="let ticket"> {{ticket.toTown}} </td>
          </ng-container>
  
          <ng-container matColumnDef="payment_type">
              <th mat-header-cell *matHeaderCellDef> Payment Type </th>
              <td mat-cell *matCellDef="let ticket"> {{ticket.paymentType}} </td>
          </ng-container>
  
          <ng-container matColumnDef="paid_amount">
              <th mat-header-cell *matHeaderCellDef> Paid Amount </th>
              <td mat-cell *matCellDef="let ticket"> {{ticket.totalAmountPaid}} </td>
          </ng-container>

        <ng-container matColumnDef="ticket_status">
            <th mat-header-cell *matHeaderCellDef> Ticket Status </th>
            <td mat-cell *matCellDef="let ticket"> {{ticket.ticketStatus}} </td>
        </ng-container>
        
        <ng-container matColumnDef="seats">
            <th mat-header-cell *matHeaderCellDef> Seats Booked </th>
            <td mat-cell *matCellDef="let ticket"> {{ticket.normalSeats + ticket.singleSleeperSeats + ticket.sharingSleeperSeats}} </td>
        </ng-container>

        <ng-container matColumnDef="booking_date">
            <th mat-header-cell *matHeaderCellDef> 
                <button class="filterButton" #dateButton mat-stroked-button color="primary" (click)="openBookingDateDialog(dateButton)">Booking Date</button>   
            </th>
            <td mat-cell *matCellDef="let ticket"> {{ticket.bookingDate | date}} </td>
        </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="onViewTicketDetailClick(row)"></tr>
      </table>
  
      <mat-paginator #paginator class="mat-elevation-z8"
          [length]="itemCount"
          [pageSize]="15"
          [pageSizeOptions]="[15]"
          (page)="pageEvent = $event; onPaginateChange($event)"
          aria-label="Select page"
          showFirstLastButtons>
      </mat-paginator>
  </div>
</div>

